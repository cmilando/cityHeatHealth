The package `cityHeatHealth` makes it simple to estimate heat-health
impacts at small spatial scales. Starting from a messy exposure and
outcome dataset, we can quickly estimate heat-health impacts.

This package can be used in three main ways:

| 1-stage design | 2-stage design | Spatial Bayes |
|----|----|----|
| A 1-stage conditional poisson model when estimating a *single set of beta coefficients* for heat-health impacts across single or multiple zones | A 2-stage design is used when estimating heat-health impacts across many zones, but where *individual zone models* are desired | If numbers are very small in the 2-stage design, spatial bayesian methods can be used to tighten confidence intervals |

Essentially, the spatial bayes (SB) method is a bridge between and 1
stage and a 2 stage if you want more granularity than a 1 stage, but the
data aren’t strong enough to do a 2 stage even with blups, you can do an
SB model, which is sort of like many overlapping 1 stage models of
groups of spatial units fused together.

The vignettes for these are:

- [`vignette("one_stage_demo")`](http://chadmilando.com/cityHeatHealth/articles/one_stage_demo.md)
- [`vignette("two_stage_demo")`](http://chadmilando.com/cityHeatHealth/articles/two_stage_demo.md)
- [`vignette("bayesian_demo")`](http://chadmilando.com/cityHeatHealth/articles/bayesian_demo.md)

In implementations, an attributable number calculation is applied to
model outcomes to get heat-attributable outcomes. To avoid repetition,
we provide a separate vignette that details the attributable number
module:
[`vignette("attributable_number")`](http://chadmilando.com/cityHeatHealth/articles/attributable_number.md).

## Starting a new analysis

To start a new analysis, you will need the following **4** datasets:

| Exposure | Outcomes | Populations | Spatial |
|----|----|----|----|
| Exposures at the daily scale for each `geo_unit` | Health outcomes at the daily scale for each `geo_unit` | Population data for each subdivision of the health outcome data that you want results for | A map showing how the various `geo_unit`s are neighbors |

This package comes pre-loaded with sample datasets of each type (e.g.,
`ma_exposure`, `ma_deaths`, `ma_pop_data`, and `ma_towns` respectively)
so each of these methods can be explored. See the above vignettes for
starter code for each type of analysis.

## Additional vignettes

We also provide several additional vignettes for common questions:

- [`vignette("comparison")`](http://chadmilando.com/cityHeatHealth/articles/comparison.md):
  a comparison between our methods and outputs from other tutorials
- [`vignette("dlnm_sensitivity")`](http://chadmilando.com/cityHeatHealth/articles/dlnm_sensitivity.md):
  shows how to assess dlnm sensitivity
- [`vignette("get_pop_estimates")`](http://chadmilando.com/cityHeatHealth/articles/get_pop_estimates.md):
  sample code for how to get population estimates from `tidycensus`
- vignette(“validation”)\`: showing that the spatial bayesian methods
  work when case numbers become very small

# Package index

## All functions

- [`calc_AN()`](http://chadmilando.com/cityHeatHealth/reference/calc_AN.md)
  : Calculate attributable number and attributable rates
- [`calc_dispersion()`](http://chadmilando.com/cityHeatHealth/reference/calc_dispersion.md)
  : Calculate the dispersion parameter for a quasi-poisson model
- [`calc_vcov()`](http://chadmilando.com/cityHeatHealth/reference/calc_vcov.md)
  : Calculate the variance-covariance matrix of a Conditional poisson
  model
- [`check_argvar()`](http://chadmilando.com/cityHeatHealth/reference/check_argvar.md)
  : Internal function to check argvar
- [`cityHeatHealth-package`](http://chadmilando.com/cityHeatHealth/reference/cityHeatHealth-package.md)
  [`cityHeatHealth`](http://chadmilando.com/cityHeatHealth/reference/cityHeatHealth-package.md)
  : The 'cityHeatHealth' package.
- [`condPois_1stage()`](http://chadmilando.com/cityHeatHealth/reference/condPois_1stage.md)
  : Run a conditional poisson model for a single geographic unit
- [`condPois_2stage()`](http://chadmilando.com/cityHeatHealth/reference/condPois_2stage.md)
  : Run a conditional poisson model for across many geographic units
- [`condPois_sb()`](http://chadmilando.com/cityHeatHealth/reference/condPois_sb.md)
  : Run a conditional poisson model with Spatial Bayesian inference
- [`expand_arglist()`](http://chadmilando.com/cityHeatHealth/reference/expand_arglist.md)
  : Title
- [`forest_plot()`](http://chadmilando.com/cityHeatHealth/reference/forest_plot.md)
  : forest_plot base class
- [`getSW()`](http://chadmilando.com/cityHeatHealth/reference/getSW.md)
  : Title
- [`getSmat()`](http://chadmilando.com/cityHeatHealth/reference/getSmat.md)
  : Title
- [`get_centered_cp()`](http://chadmilando.com/cityHeatHealth/reference/get_centered_cp.md)
  : Internal function to get centered cp objects
- [`indexByComponent()`](http://chadmilando.com/cityHeatHealth/reference/indexByComponent.md)
  : Title
- [`ma_counties`](http://chadmilando.com/cityHeatHealth/reference/ma_counties.md)
  : Massachusetts Towns and Cities (2020 Census)
- [`ma_deaths`](http://chadmilando.com/cityHeatHealth/reference/ma_deaths.md)
  : Daily Deaths by Town
- [`ma_exposure`](http://chadmilando.com/cityHeatHealth/reference/ma_exposure.md)
  : Daily Maximum Temperature Exposure by Town
- [`ma_pop_data`](http://chadmilando.com/cityHeatHealth/reference/ma_pop_data.md)
  : Massachusetts town-level population by sex and age group
- [`ma_towns`](http://chadmilando.com/cityHeatHealth/reference/ma_towns.md)
  : Massachusetts Towns and Cities (2020 Census)
- [`make_cb_list()`](http://chadmilando.com/cityHeatHealth/reference/make_cb_list.md)
  : make_cb_list
- [`make_exposure_matrix()`](http://chadmilando.com/cityHeatHealth/reference/make_exposure_matrix.md)
  : Function to clean and prepare the exposure data matrix
- [`make_outcome_table()`](http://chadmilando.com/cityHeatHealth/reference/make_outcome_table.md)
  : Function to create the outcome table
- [`make_xgrid()`](http://chadmilando.com/cityHeatHealth/reference/make_xgrid.md)
  : An internal function to make the xgrid
- [`nb2graph()`](http://chadmilando.com/cityHeatHealth/reference/nb2graph.md)
  : Title
- [`nb2subgraph()`](http://chadmilando.com/cityHeatHealth/reference/nb2subgraph.md)
  : Title
- [`nx()`](http://chadmilando.com/cityHeatHealth/reference/nx.md) :
  Title
- [`scale_nb_components()`](http://chadmilando.com/cityHeatHealth/reference/scale_nb_components.md)
  : Title
- [`spatial_plot()`](http://chadmilando.com/cityHeatHealth/reference/spatial_plot.md)
  : spatial_plot base class

# Articles

### Main vignettes

- [One set of Heat-Health Associations for a single or multiple zones
  using
  \`cityHeatHealth\`](http://chadmilando.com/cityHeatHealth/articles/one_stage_demo.md):
- [Heat-Health Associations across multiple towns using
  \`cityHeatHealth\`](http://chadmilando.com/cityHeatHealth/articles/two_stage_demo.md):
- [Using Spatial Bayesian methods in
  \`cityHeatHealth\`](http://chadmilando.com/cityHeatHealth/articles/bayesian_demo.md):
- [Calculating attributable numbers and rates in
  \`cityHeatHealth\`](http://chadmilando.com/cityHeatHealth/articles/attributable_number.md):

### Additional vignettes

Vignettes aimed at advanced users

- [faq](http://chadmilando.com/cityHeatHealth/articles/faq.md):
- [Obtaining population estimates from
  \`tidycensus\`](http://chadmilando.com/cityHeatHealth/articles/get_pop_estimates.md):
- [Validation of spatial methods in
  \`cityHeatHealth\`](http://chadmilando.com/cityHeatHealth/articles/validation.md):
- [Exploring DLNM sensitivity in
  \`cityHeatHealth\`](http://chadmilando.com/cityHeatHealth/articles/dlnm_sensitivity.md):
- [Comparison of \`cityHeatHealth\` to other AN
  tutorials](http://chadmilando.com/cityHeatHealth/articles/comparison.md):
- [group-check](http://chadmilando.com/cityHeatHealth/articles/group-check.md):
- [Todo](http://chadmilando.com/cityHeatHealth/articles/TODO.md):
