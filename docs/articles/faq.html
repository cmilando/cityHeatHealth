<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>faq • cityHeatHealth</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="faq">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cityHeatHealth</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/one_stage_demo.html">One set of Heat-Health Associations for a single or multiple zones using `cityHeatHealth`</a></li>
    <li><a class="dropdown-item" href="../articles/two_stage_demo.html">Heat-Health Associations across multiple towns using `cityHeatHealth`</a></li>
    <li><a class="dropdown-item" href="../articles/bayesian_demo.html">Using Spatial Bayesian methods in `cityHeatHealth`</a></li>
    <li><a class="dropdown-item" href="../articles/attributable_number.html">Calculating attributable numbers and rates in `cityHeatHealth`</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>faq</h1>
            
      

      <div class="d-none name"><code>faq.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://chadmilando.com/cityHeatHealth/">cityHeatHealth</a></span><span class="op">)</span></span></code></pre></div>
<p>Some things that will eventually go in the paper:</p>
<ol style="list-style-type: decimal">
<li><p>The reason we are doing a conditional poisson (over time-series
analysis) is because it has some built-in properties that can help with
small numbers (i.e., dropping low or empty strata). and we potentially
trust the structure here more than the splines for time approach. As
such there as several places where numeric cut-offs are necessary: MinN,
strata_total. tHese are sensitivitity points</p></li>
<li><p>The reason we are using data.table instead of tidyverse is so
that joins can be done more efficiently on smaller computers (which may
be the case for our hypothesized user)</p></li>
<li><p>We are specifically designing this for daily data. I think it
could likely be used with other types of data though, might be worth
testing to see where it breaks. As we’ve seen, other time frames
introduce other problems that are out of scope.</p></li>
</ol>
<p>(3.5) we are also testing this for non-fatal</p>
<ol start="4" style="list-style-type: decimal">
<li><p>the motivation here is for small-area studies, hence the specific
setup for grp and grp-level. as per the paper these are both (i) hard to
do, and (ii) essential for public health officials</p></li>
<li><p>How to deal with differing underlying population sizes? scale by
the log-offset? But should it matter since you are doing within
year-month-dow strata? No, the strata always have to be within
populations that are the same, else the math gets messed up. I dont want
to include an adjustment for log-population so i can use strata that
combine multiple populations, although we could somewhat easily. Im just
not sure how this would work in stan if its expecting the Y to be a
number. I suppose in a future iteration you could build in scaling and
un-scaling by some nominal amount.</p></li>
<li><p>for both exposures and outcomes, <code>make_xgrid</code> is a key
function that creates the skeleton of what you expect.</p></li>
<li><p>throughout we also want to keep the size of various datasets
small.</p></li>
<li><p>and you need to remember its crossreduce not crosspred at the end
of the day</p></li>
<li><p>you could make this slightly more size resilient by not expanding
outcomes until the inner step, but for now this is hopefully ok with
data.table and pointers.</p></li>
<li><p>why aren’t you doing more with future? im not sure these tasks
are best suited, its a lot of quickly running tasks with lots of i/o and
things to be passed around. none of these calculations actually take
that long. I suppose you could look into it for some of the smaller
tasks. but you’d have to make copies of some of the large objects, which
could be bad? unless they aren’t actually that big. Also the speed gains
are pretty small, this really doesn’t take that much time at all, so
your total time savings will be small. The other thing about not doing
it in future_ is that it becomes (a) harder to deploy (b) harder to
ensure it works on mac and pc and (c) much harder to debug. would be
worth it if the time-savings were really a lot but we are talking about
a few minutes here</p></li>
</ol></main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chad Milando.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
